<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <title>客戶主控台</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EL31TGH202"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-EL31TGH202');
  </script>

  <style>
    body { font-family: system-ui, sans-serif; background: #f8fafc; color: #0f172a; margin: 0; min-height: 100vh; display: flex; flex-direction: column; }
    header { padding: 1.5rem 2rem; background: #0ea5e9; color: #f8fafc; display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
    .user-bar { display: flex; align-items: center; gap: 0.75rem; }
    main { flex: 1; display: flex; align-items: center; justify-content: center; padding: 2rem; }
    .card { background: #ffffff; padding: 2.5rem; border-radius: 1rem; box-shadow: 0 18px 36px rgba(15, 23, 42, 0.12); width: min(540px, 90%); }
    h1 { margin: 0 0 1rem; font-size: 2rem; }
    p { margin: 0.5rem 0; color: #334155; }
    .switch-button, .logout-button { border-radius: 9999px; padding: 0.45rem 1.1rem; font-size: 0.9rem; font-weight: 600; border: none; cursor: pointer; }
    .switch-button { background: #2563eb; color: #f8fafc; }
    .logout-button { background: transparent; color: #dc2626; border: 1px solid rgba(220, 38, 38, 0.5); }
    .logout-button:hover { background: rgba(220, 38, 38, 0.1); }
    form { margin: 0; }
    .actions { display: flex; gap: 0.75rem; }
    .actions form { margin: 0; }
    .role { margin-top: 0.5rem; color: #0ea5e9; font-weight: 600; }
  </style>
</head>
<body>
  <header>
    <strong>客戶主控台</strong>
    <div class="user-bar">
      <span>{{ user.get_username }}</span>
      <div class="actions">
        {% if has_therapist_role %}
          <form method="post" action="{% url 'accounts:switch_role' 'therapist' %}">
            {% csrf_token %}
            <button type="submit" class="switch-button">前往治療師面板</button>
          </form>
        {% endif %}
        <form method="post" action="{% url 'therapist_panel:logout' %}">
          {% csrf_token %}
          <button type="submit" class="logout-button">登出</button>
        </form>
      </div>
    </div>
  </header>
  <main>
    <section class="card">
      <h1>歡迎 {{ user.first_name|default:user.get_username }}</h1>
      <p class="role">目前角色：{{ active_role_label }}</p>
      <p>這裡是客戶主控台的示意區域，可依需求放上客戶工具或預約概覽。</p>
    </section>
  </main>
</body>
</html>
