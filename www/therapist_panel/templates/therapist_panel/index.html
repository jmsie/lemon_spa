<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Therapist Panel</title>
  <style>
    body { font-family: system-ui, sans-serif; background: #0f172a; color: #f8fafc; margin: 0; min-height: 100vh; display: flex; flex-direction: column; }
    header { padding: 1.5rem 2rem; background: rgba(15, 23, 42, 0.75); display: flex; align-items: center; justify-content: space-between; gap: 1.5rem; }
    .user-bar { display: flex; align-items: center; gap: 1rem; }
    .actions { display: flex; gap: 0.75rem; align-items: center; }
    main { flex: 1; display: flex; align-items: center; justify-content: center; padding: 2rem; }
    .card { background: #1e293b; padding: 2rem 2.5rem; border-radius: 1rem; box-shadow: 0 18px 36px rgba(15, 23, 42, 0.35); width: min(540px, 90%); }
    h1 { margin: 0 0 1rem; font-size: 2rem; }
    p { margin: 0.5rem 0; color: #cbd5f5; }
    .role { display: inline-flex; align-items: center; padding: 0.35rem 0.75rem; border-radius: 9999px; background: rgba(96, 165, 250, 0.25); color: #60a5fa; font-size: 0.9rem; font-weight: 600; }
    .switch-button { background: #22d3ee; color: #0f172a; border-radius: 9999px; padding: 0.45rem 1.1rem; border: none; font-size: 0.9rem; font-weight: 600; }
    .switch-button:hover { background: #0ea5e9; color: #f8fafc; }
    .logout-button { background: transparent; color: #f87171; border: 1px solid rgba(248, 113, 113, 0.6); border-radius: 9999px; padding: 0.4rem 1rem; font-size: 0.9rem; font-weight: 600; cursor: pointer; }
    .logout-button:hover { background: rgba(248, 113, 113, 0.15); }
    form.logout-form { margin: 0; }
    .actions form { margin: 0; }
  </style>
</head>
<body>
  <header>
    <strong>Therapist Panel</strong>
    <div class="user-bar">
      <span>{{ user.get_username }}</span>
      <div class="actions">
        {% if has_client_role %}
          <form method="post" action="{% url 'accounts:switch_role' 'client' %}">
            {% csrf_token %}
            <button type="submit" class="switch-button">Go to Client Dashboard</button>
          </form>
        {% endif %}
        <form method="post" action="{% url 'therapist_panel:logout' %}" class="logout-form">
          {% csrf_token %}
          <button type="submit" class="logout-button">Sign out</button>
        </form>
      </div>
    </div>
  </header>
  <main>
    <section class="card">
      <h1>Hello {{ user.first_name|default:user.get_username }}</h1>
      <p class="role">{{ active_role_label }}</p>
      <p>This is a placeholder dashboard for the therapist panel. Replace this card with real tools for therapists and customers.</p>
      {% if therapist_profile %}
        <p>Your therapist record ID is {{ therapist_profile.id }}.</p>
      {% endif %}
    </section>
  </main>
</body>
</html>
